<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>knncolle: knncolle::KmknnBuilder&lt; Distance_, Matrix_, Float_ &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">knncolle
   </div>
   <div id="projectbrief">Collection of KNN methods in C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceknncolle.html">knncolle</a></li><li class="navelem"><a class="el" href="classknncolle_1_1KmknnBuilder.html">KmknnBuilder</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classknncolle_1_1KmknnBuilder-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">knncolle::KmknnBuilder&lt; Distance_, Matrix_, Float_ &gt; Class Template Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Perform a nearest neighbor search based on k-means clustering.  
 <a href="classknncolle_1_1KmknnBuilder.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Kmknn_8hpp_source.html">Kmknn.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for knncolle::KmknnBuilder&lt; Distance_, Matrix_, Float_ &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classknncolle_1_1KmknnBuilder__inherit__graph.png" border="0" usemap="#aknncolle_1_1KmknnBuilder_3_01Distance___00_01Matrix___00_01Float___01_4_inherit__map" alt="Inheritance graph"/></div>
<map name="aknncolle_1_1KmknnBuilder_3_01Distance___00_01Matrix___00_01Float___01_4_inherit__map" id="aknncolle_1_1KmknnBuilder_3_01Distance___00_01Matrix___00_01Float___01_4_inherit__map">
<area shape="rect" title="Perform a nearest neighbor search based on k&#45;means clustering." alt="" coords="5,94,162,150"/>
<area shape="rect" href="classknncolle_1_1Builder.html" title="Interface to build nearest&#45;neighbor search indices." alt="" coords="22,5,145,46"/>
<area shape="poly" title=" " alt="" coords="86,61,86,93,81,93,81,61"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for knncolle::KmknnBuilder&lt; Distance_, Matrix_, Float_ &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classknncolle_1_1KmknnBuilder__coll__graph.png" border="0" usemap="#aknncolle_1_1KmknnBuilder_3_01Distance___00_01Matrix___00_01Float___01_4_coll__map" alt="Collaboration graph"/></div>
<map name="aknncolle_1_1KmknnBuilder_3_01Distance___00_01Matrix___00_01Float___01_4_coll__map" id="aknncolle_1_1KmknnBuilder_3_01Distance___00_01Matrix___00_01Float___01_4_coll__map">
<area shape="rect" title="Perform a nearest neighbor search based on k&#45;means clustering." alt="" coords="5,94,162,150"/>
<area shape="rect" href="classknncolle_1_1Builder.html" title="Interface to build nearest&#45;neighbor search indices." alt="" coords="22,5,145,46"/>
<area shape="poly" title=" " alt="" coords="86,61,86,93,81,93,81,61"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ab70f49036aa3f59e67e84eb9bdae5c2c" id="r_ab70f49036aa3f59e67e84eb9bdae5c2c"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="structknncolle_1_1KmknnOptions.html">KmknnOptions</a>&lt; typename Matrix_::dimension_type, typename Matrix_::index_type, typename Matrix_::data_type &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknncolle_1_1KmknnBuilder.html#ab70f49036aa3f59e67e84eb9bdae5c2c">Options</a></td></tr>
<tr class="separator:ab70f49036aa3f59e67e84eb9bdae5c2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae8338140eae1984a667f226475401491" id="r_ae8338140eae1984a667f226475401491"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknncolle_1_1KmknnBuilder.html#ae8338140eae1984a667f226475401491">KmknnBuilder</a> (<a class="el" href="classknncolle_1_1KmknnBuilder.html#ab70f49036aa3f59e67e84eb9bdae5c2c">Options</a> options)</td></tr>
<tr class="separator:ae8338140eae1984a667f226475401491"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9a0a6e9e591b23b7bed3c16ab786ea3" id="r_ac9a0a6e9e591b23b7bed3c16ab786ea3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknncolle_1_1KmknnBuilder.html#ac9a0a6e9e591b23b7bed3c16ab786ea3">KmknnBuilder</a> ()=default</td></tr>
<tr class="separator:ac9a0a6e9e591b23b7bed3c16ab786ea3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6dc5c628478732fb4b5d0f027f1d7a8" id="r_af6dc5c628478732fb4b5d0f027f1d7a8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classknncolle_1_1KmknnBuilder.html#ab70f49036aa3f59e67e84eb9bdae5c2c">Options</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknncolle_1_1KmknnBuilder.html#af6dc5c628478732fb4b5d0f027f1d7a8">get_options</a> ()</td></tr>
<tr class="separator:af6dc5c628478732fb4b5d0f027f1d7a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafe27a514becc203a33ec54584bf6562" id="r_aafe27a514becc203a33ec54584bf6562"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classknncolle_1_1Prebuilt.html">Prebuilt</a>&lt; typename Matrix_::dimension_type, typename Matrix_::index_type, Float_ &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknncolle_1_1KmknnBuilder.html#aafe27a514becc203a33ec54584bf6562">build_raw</a> (const Matrix_ &amp;data) const</td></tr>
<tr class="separator:aafe27a514becc203a33ec54584bf6562"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classknncolle_1_1Builder"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classknncolle_1_1Builder')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classknncolle_1_1Builder.html">knncolle::Builder&lt; Matrix_, Float_ &gt;</a></td></tr>
<tr class="memitem:afe899198735bd5f9d1921283fa65ff3a inherit pub_methods_classknncolle_1_1Builder" id="r_afe899198735bd5f9d1921283fa65ff3a"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classknncolle_1_1Prebuilt.html">Prebuilt</a>&lt; typename Matrix_::dimension_type, typename Matrix_::index_type, Float_ &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknncolle_1_1Builder.html#afe899198735bd5f9d1921283fa65ff3a">build_shared</a> (const Matrix_ &amp;data) const</td></tr>
<tr class="separator:afe899198735bd5f9d1921283fa65ff3a inherit pub_methods_classknncolle_1_1Builder"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeda432debae999f988f32f147055251 inherit pub_methods_classknncolle_1_1Builder" id="r_afeda432debae999f988f32f147055251"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classknncolle_1_1Prebuilt.html">Prebuilt</a>&lt; typename Matrix_::dimension_type, typename Matrix_::index_type, Float_ &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classknncolle_1_1Builder.html#afeda432debae999f988f32f147055251">build_unique</a> (const Matrix_ &amp;data) const</td></tr>
<tr class="separator:afeda432debae999f988f32f147055251 inherit pub_methods_classknncolle_1_1Builder"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;class Distance_ = EuclideanDistance, class Matrix_ = SimpleMatrix&lt;int, int, double&gt;, typename Float_ = double&gt;<br />
class knncolle::KmknnBuilder&lt; Distance_, Matrix_, Float_ &gt;</div><p>Perform a nearest neighbor search based on k-means clustering. </p>
<p>In the k-means with k-nearest neighbors (KMKNN) algorithm (Wang, 2012), k-means clustering is first applied to the data points, with the number of cluster centers defined as the square root of the number of points. The cluster assignment and distance to the assigned cluster center for each point represent the KMKNN indexing information, allowing us to speed up the nearest neighbor search by exploiting the triangle inequality between cluster centers, the query point and each point in the cluster to narrow the search space. The advantage of the KMKNN approach is its simplicity and minimal overhead, resulting in performance improvements over conventional tree-based methods for high-dimensional data where most points need to be searched anyway.</p>
<p>The <code><a class="el" href="classknncolle_1_1KmknnBuilder.html#aafe27a514becc203a33ec54584bf6562">build_raw()</a></code> method will create an instance of a <code><a class="el" href="classknncolle_1_1KmknnPrebuilt.html" title="Index for a KMKNN search.">KmknnPrebuilt</a></code> class.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Distance_</td><td>Class to compute the distance between vectors, see <code>distance::Euclidean</code> for an example. </td></tr>
    <tr><td class="paramname">Matrix_</td><td>Matrix-like object satisfying the <code><a class="el" href="classknncolle_1_1MockMatrix.html" title="Compile-time interface for matrix data.">MockMatrix</a></code> contract. </td></tr>
    <tr><td class="paramname">Float_</td><td>Floating point type for the query data and output distances.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>Wang X (2012). A fast exact k-nearest neighbors algorithm for high dimensional search using k-means clustering and triangle inequality. <em>Proc Int Jt Conf Neural Netw</em>, 43, 6:2351-2358. </dd></dl>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="ab70f49036aa3f59e67e84eb9bdae5c2c" name="ab70f49036aa3f59e67e84eb9bdae5c2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab70f49036aa3f59e67e84eb9bdae5c2c">&#9670;&#160;</a></span>Options</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Distance_  = EuclideanDistance, class Matrix_  = SimpleMatrix&lt;int, int, double&gt;, typename Float_  = double&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="structknncolle_1_1KmknnOptions.html">KmknnOptions</a>&lt;typename Matrix_::dimension_type, typename Matrix_::index_type, typename Matrix_::data_type&gt; <a class="el" href="classknncolle_1_1KmknnBuilder.html">knncolle::KmknnBuilder</a>&lt; Distance_, Matrix_, Float_ &gt;::Options</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convenient name for the <code><a class="el" href="structknncolle_1_1KmknnOptions.html" title="Options for KmknnBuilder and KmknnPrebuilt construction.">KmknnOptions</a></code> class that ensures consistent template parametrization. </p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ae8338140eae1984a667f226475401491" name="ae8338140eae1984a667f226475401491"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8338140eae1984a667f226475401491">&#9670;&#160;</a></span>KmknnBuilder() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Distance_  = EuclideanDistance, class Matrix_  = SimpleMatrix&lt;int, int, double&gt;, typename Float_  = double&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classknncolle_1_1KmknnBuilder.html">knncolle::KmknnBuilder</a>&lt; Distance_, Matrix_, Float_ &gt;::KmknnBuilder </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classknncolle_1_1KmknnBuilder.html#ab70f49036aa3f59e67e84eb9bdae5c2c">Options</a>&#160;</td>
          <td class="paramname"><em>options</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">options</td><td>Further options for the KMKNN algorithm. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac9a0a6e9e591b23b7bed3c16ab786ea3" name="ac9a0a6e9e591b23b7bed3c16ab786ea3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9a0a6e9e591b23b7bed3c16ab786ea3">&#9670;&#160;</a></span>KmknnBuilder() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Distance_  = EuclideanDistance, class Matrix_  = SimpleMatrix&lt;int, int, double&gt;, typename Float_  = double&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classknncolle_1_1KmknnBuilder.html">knncolle::KmknnBuilder</a>&lt; Distance_, Matrix_, Float_ &gt;::KmknnBuilder </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Default constructor. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aafe27a514becc203a33ec54584bf6562" name="aafe27a514becc203a33ec54584bf6562"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafe27a514becc203a33ec54584bf6562">&#9670;&#160;</a></span>build_raw()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Distance_  = EuclideanDistance, class Matrix_  = SimpleMatrix&lt;int, int, double&gt;, typename Float_  = double&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classknncolle_1_1Prebuilt.html">Prebuilt</a>&lt; typename Matrix_::dimension_type, typename Matrix_::index_type, Float_ &gt; * <a class="el" href="classknncolle_1_1KmknnBuilder.html">knncolle::KmknnBuilder</a>&lt; Distance_, Matrix_, Float_ &gt;::build_raw </td>
          <td>(</td>
          <td class="paramtype">const Matrix_ &amp;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Matrix-like object (see <code><a class="el" href="classknncolle_1_1MockMatrix.html" title="Compile-time interface for matrix data.">MockMatrix</a></code>) containing observations in columns and dimensions in rows. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to a pre-built search index. </dd></dl>

<p>Implements <a class="el" href="classknncolle_1_1Builder.html#aa1c84ac7bd4120f5539be1320b74f5f4">knncolle::Builder&lt; Matrix_, Float_ &gt;</a>.</p>

</div>
</div>
<a id="af6dc5c628478732fb4b5d0f027f1d7a8" name="af6dc5c628478732fb4b5d0f027f1d7a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6dc5c628478732fb4b5d0f027f1d7a8">&#9670;&#160;</a></span>get_options()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Distance_  = EuclideanDistance, class Matrix_  = SimpleMatrix&lt;int, int, double&gt;, typename Float_  = double&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classknncolle_1_1KmknnBuilder.html#ab70f49036aa3f59e67e84eb9bdae5c2c">Options</a> &amp; <a class="el" href="classknncolle_1_1KmknnBuilder.html">knncolle::KmknnBuilder</a>&lt; Distance_, Matrix_, Float_ &gt;::get_options </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Options for the KMKNN algorithm. These can be modified prior to running <code><a class="el" href="classknncolle_1_1KmknnBuilder.html#aafe27a514becc203a33ec54584bf6562">build_raw()</a></code> and friends. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>knncolle/<a class="el" href="Kmknn_8hpp_source.html">Kmknn.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
